---
import { Icon } from 'astro-icon/components';
import Layout from '../layouts/MainLayout.astro';
import StructuredData from '@/components/StructuredData.astro';
import { Image } from 'astro:assets';
import rollOffImg from '/public/images/dumpsters/roll-off.png';
import dumpster10yd from '/public/images/dumpsters/10yd.jpg';
import "flatpickr/dist/flatpickr.min.css";

const keywords = [
  //Brand
  "joetheguy dumpsters", "joe the guy dumpsters",
  // Core Dumpster Services
  "dumpster", "dumpsters", "dumpster rental", "dumpsters rental", "roll off dumpster", "roll-off dumpster",
  "dumpster rental near me", "rent a dumpster", "rent dumpster", "dumpster service", "dumpster delivery",

  // Dumpster Sizes
  "15 yard dumpster", "20 yard dumpster", "30 yard dumpster", "15 cubic yard dumpster",
  "20 cubic yard dumpster", "30 cubic yard dumpster", "small dumpster", "large dumpster",
  "medium dumpster", "residential dumpster sizes", "dumpster sizes",

  // Dumpster Types & Uses
  "residential dumpster", "commercial dumpster", "construction dumpster", "demolition dumpster",
  "renovation dumpster", "cleanout dumpster", "roofing dumpster", "yard waste dumpster",
  "debris dumpster", "junk dumpster", "household dumpster",

  // Waste & Removal Services
  "waste removal", "trash removal", "debris removal", "junk removal", "garbage removal",
  "trash removal service", "waste disposal", "construction debris removal", "yard debris removal",
  "trash pick up", "garbage", "trash",

  // Location - Spartanburg Area
  "Spartanburg", "in Spartanburg", "Spartanburg SC", "Spartanburg County",
  "dumpster rental Spartanburg", "dumpster rental Spartanburg SC",
  "Greenville", "in Greenville", "Greenville SC", "dumpster rental Greenville",
  "Greer", "in Greer", "dumpster rental Greer",
  "Inman", "in Inman", "dumpster rental Inman",
  "Boiling Springs", "Roebuck", "Upstate SC",

  // Near Me Variations
  "dumpster near me", "trash removal near me", "waste removal near me",
  "dumpster rental service near me", "roll off dumpster near me",
  "trash removal service near me", "junk removal near me",

  // Service Qualities & Pricing
  "affordable dumpster rental", "cheap dumpster rental", "dumpster rental prices",
  "dumpster rental cost", "dumpster pricing", "best dumpster rental",
  "fast dumpster delivery", "same day dumpster", "weekend dumpster rental",

  // Project Types
  "dumpster for renovation", "dumpster for construction", "dumpster for cleanout",
  "dumpster for roofing", "spring cleaning dumpster", "estate cleanout dumpster",
  "garage cleanout dumpster", "home cleanout", "basement cleanout",

  // Rental Terms
  "weekly dumpster rental", "temporary dumpster", "short term dumpster rental",
  "dumpster delivery and pickup", "rent a roll off", "cheap dumpster rental", "best dumpster rental",
];
const description = "Affordable roll-off dumpster rentals in Spartanburg County. 15, 20, and 30 yard dumpsters for home renovations, construction, and cleanouts. Fast delivery, competitive pricing.";

// Dumpster Pricing (in dollars per week)
const price15Yard = 500;
const price20Yard = 525;
const price30Yard = 750;

---
<Layout title="Dumpster Rental | Joe The Guy" description={description} keywords={keywords}>
  <StructuredData type="Product" productName="15 Yard Dumpster Rental" productDescription="Roll-off dumpster rental for home renovations and cleanouts" productPrice="500" slot="head" />
  <div class="w-full h-auto relative max-h-[400px] sm:max-h-[500px] md:max-h-[600px] lg:max-h-none overflow-hidden">

      <Image src={rollOffImg} alt="Dumpster Rental" class="opacity-50 w-full h-[400px] sm:h-[500px] md:h-[600px] lg:h-auto lg:max-h-96 object-cover" />
      <div class="absolute top-4 bottom-4 left-4 sm:top-6 sm:bottom-6 sm:left-8 md:left-16 lg:top-8 lg:bottom-8 lg:left-28 flex-col text-left bg-black bg-opacity-50 w-[85%] sm:w-3/4 md:w-2/3 lg:max-w-2xl">
        <div class="relative font-raleway uppercase text-xl sm:text-2xl lg:text-3xl font-semibold border-b-2 border-primary bg-opacity-85">
          <h1 class="text-primary pt-4 px-4 sm:pt-6 sm:px-6 lg:pt-8 lg:px-8 font-extrabold">Need a dumpster?</h1>
          <h2 class="text-white mt-1 px-4 sm:px-6 lg:px-8 pb-2">Dumpster Rental Services</h2>
        </div>
        <div class="relative bg-opacity-5">
          <h2 class="text-white font-normal text-lg sm:text-lg lg:text-lg/8 px-4 sm:px-6 lg:px-8 pt-2">Looking for dumpster rental in Spartanburg? We provide affordable, fast, and hassle-free roll-off dumpster rentals for homeowners, contractors, and businesses. Whether you're handling a home renovation, construction project, or major cleanup, we have the right dumpster size for your needs.</h2>  
        </div>
      </div>

  </div>

  <div class="flex flex-col">
  <!-- 15 Yard Dumpster Section -->
  <div class="flex flex-col lg:flex-row justify-center align-middle px-4 md:px-8 lg:px-16 mb-12 md:mb-16 lg:mb-20">
    <div class="w-full lg:w-1/2 mx-auto mt-8">
      <Image src={dumpster10yd} class="w-full h-auto" alt="15 Yard Dumpster" />
    </div>
    <div class="w-full lg:w-1/2 mx-auto mt-8 lg:ml-8">
      <div class="flex flex-col">
        <h1 class="text-2xl md:text-3xl font-raleway font-bold">15 Cubic Yard, 1.5 Ton Max</h1>
        <h1 class="text-2xl md:text-3xl font-raleway font-bold"> General Debris Dumpster</h1>
        <div class="flex flex-col sm:flex-row sm:items-center my-6 md:my-8 gap-4 sm:gap-0">
          <div class="text-lg md:text-xl">
            <span class="text-primary font-bold text-2xl md:text-3xl">${price15Yard}</span>/week
          </div>
          <div class="flex items-center sm:ml-8 md:ml-16 lg:ml-40">
            <Icon name="map-pin" class="text-primary mr-2 w-5 h-5"/> <span class="text-sm md:text-base">Available in Spartanburg County</span>
          </div>
        </div>
        <div class="text-sm md:text-base">
          Perfect for smaller projects like garage cleanouts, yard work, or minor renovations. Our 15 cubic yard dumpster is ideal for residential cleanups, small remodeling projects, and disposing of general household debris and junk.
        </div>
        <div class="mt-6 space-y-3">
          <button
            class="prohibited-materials-trigger text-blue-600 underline hover:no-underline text-sm font-medium"
          >
            Prohibited materials
          </button>
        </div>
        <div class="flex flex-col sm:flex-row gap-4 mt-6 md:mt-8">
          <input id="datepicker-start-15" type="text" class="w-full sm:w-auto flex-1 border border-gray-300 p-2 md:p-3 rounded text-sm md:text-base" placeholder="Select Delivery Date" required/>
          <input id="datepicker-end-15" type="text" class="w-full sm:w-auto flex-1 border border-gray-300 p-2 md:p-3 rounded text-sm md:text-base" placeholder="Select Pickup Date" required/>
        </div>
        <div class="flex mt-4 md:mt-6">
          <button data-dumpster-type="15" data-dumpster-price={price15Yard} class="book-now-btn bg-primary text-white py-2 md:py-3 px-6 md:px-8 rounded-2xl text-sm md:text-base font-semibold hover:bg-accent1 transition-colors">Book Now</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 20 Yard Dumpster Section -->
  <div class="flex flex-col lg:flex-row justify-center align-middle px-4 md:px-8 lg:px-16 mb-12 md:mb-16 lg:mb-20">
    <div class="w-full lg:w-1/2 mx-auto mt-8">
      <Image src={dumpster10yd} class="w-full h-auto" alt="20 Yard Dumpster" />
    </div>
  <div class="w-full lg:w-1/2 mx-auto mt-8 lg:ml-8">
    <div class="flex flex-col">
      <h1 class="text-2xl md:text-3xl font-raleway font-bold">20 Cubic Yard, 2 Ton Max</h1>
      <h1 class="text-2xl md:text-3xl font-raleway font-bold"> General Debris Dumpster</h1>
      <div class="flex flex-col sm:flex-row sm:items-center my-6 md:my-8 gap-4 sm:gap-0">
        <div class="text-lg md:text-xl">
          <span class="text-primary font-bold text-2xl md:text-3xl">${price20Yard}</span>/week
        </div>
        <div class="flex items-center sm:ml-8 md:ml-16 lg:ml-40">
          <Icon name="map-pin" class="text-primary mr-2 w-5 h-5"/> <span class="text-sm md:text-base">Available in Spartanburg County</span>
        </div>
      </div>
      <div class="text-sm md:text-base">
        Whether it's time for spring cleaning, a home renovation, or a major construction project, our 20 cubic yard dumpster is the perfect solution for your waste removal needs. This dumpster is ideal for general debris, including household items, furniture, and construction materials.
      </div>
      <div class="mt-6 space-y-3">
        <button
          class="prohibited-materials-trigger text-blue-600 underline hover:no-underline text-sm font-medium"
        >
          Prohibited materials
        </button>
      </div>
      <div class="flex flex-col sm:flex-row gap-4 mt-6 md:mt-8">
        <input id="datepicker-start-20" type="text" class="w-full sm:w-auto flex-1 border border-gray-300 p-2 md:p-3 rounded text-sm md:text-base" placeholder="Select Delivery Date" required/>
        <input id="datepicker-end-20" type="text" class="w-full sm:w-auto flex-1 border border-gray-300 p-2 md:p-3 rounded text-sm md:text-base" placeholder="Select Pickup Date" required/>
      </div>
      <div class="flex mt-4 md:mt-6">
        <button data-dumpster-type="20" data-dumpster-price={price20Yard} class="book-now-btn bg-primary text-white py-2 md:py-3 px-6 md:px-8 rounded-2xl text-sm md:text-base font-semibold hover:bg-accent1 transition-colors">Book Now</button>
      </div>
    </div>
  </div>
  </div>

  <!-- 30 Yard Dumpster Section -->
  <div class="flex flex-col lg:flex-row justify-center align-middle px-4 md:px-8 lg:px-16 mb-12 md:mb-16 lg:mb-20">
    <div class="w-full lg:w-1/2 mx-auto mt-8">
      <Image src={dumpster10yd} class="w-full h-auto" alt="30 Yard Dumpster" />
    </div>
    <div class="w-full lg:w-1/2 mx-auto mt-8 lg:ml-8">
      <div class="flex flex-col">
        <h1 class="text-2xl md:text-3xl font-raleway font-bold">30 Cubic Yard, 3 Ton Max</h1>
        <h1 class="text-2xl md:text-3xl font-raleway font-bold"> General Debris Dumpster</h1>
        <div class="flex flex-col sm:flex-row sm:items-center my-6 md:my-8 gap-4 sm:gap-0">
          <div class="text-lg md:text-xl">
            <span class="text-primary font-bold text-2xl md:text-3xl">${price30Yard}</span>/week
          </div>
          <div class="flex items-center sm:ml-8 md:ml-16 lg:ml-40">
            <Icon name="map-pin" class="text-primary mr-2 w-5 h-5"/> <span class="text-sm md:text-base">Available in Spartanburg County</span>
          </div>
        </div>
        <div class="text-sm md:text-base">
          Our largest option, perfect for major construction projects, large-scale renovations, or commercial cleanouts. The 30 cubic yard dumpster can handle significant amounts of construction debris, roofing materials, and heavy-duty waste removal needs.
        </div>
        <div class="mt-6 space-y-3">
          <button
            class="prohibited-materials-trigger text-blue-600 underline hover:no-underline text-sm font-medium"
          >
            Prohibited materials
          </button>
        </div>
      </div>
        <div class="flex flex-col sm:flex-row gap-4 mt-6 md:mt-8">
          <input id="datepicker-start-30" type="text" class="w-full sm:w-auto flex-1 border border-gray-300 p-2 md:p-3 rounded text-sm md:text-base" placeholder="Select Delivery Date" required/>
          <input id="datepicker-end-30" type="text" class="w-full sm:w-auto flex-1 border border-gray-300 p-2 md:p-3 rounded text-sm md:text-base" placeholder="Select Pickup Date" required/>
        </div>
        <div class="flex mt-4 md:mt-6">
          <button data-dumpster-type="30" data-dumpster-price={price30Yard} class="book-now-btn bg-primary text-white py-2 md:py-3 px-6 md:px-8 rounded-2xl text-sm md:text-base font-semibold hover:bg-accent1 transition-colors">Book Now</button>
        </div>
    </div>
    
  </div>

  <!-- Prohibited Materials Modal -->
  <div id="prohibited-materials-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-xl max-w-3xl max-h-[90vh] overflow-y-auto relative">
      <button id="close-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl font-bold">&times;</button>
      <div class="p-6">
        <h3 class="mb-2 text-xl md:text-2xl font-bold">Prohibited Materials</h3>

        <p class="mb-4 text-slate-700 text-sm md:text-base">
          For safety and to comply with local regulations, the following items
          <strong>may not</strong> be placed in our dumpsters. If you're unsure about
          an item, please contact us before loading it.
        </p>

        <!-- CATEGORY -->
        <h4 class="mt-4 mb-1 text-base md:text-lg font-semibold text-slate-900">
          Hazardous Materials & Chemicals
        </h4>
        <ul class="ml-5 list-disc space-y-1 text-sm md:text-base">
          <li>Oil-based paints, stains, lacquers, solvents, paint thinner</li>
          <li>Motor oil, antifreeze, gasoline, fuels, automotive fluids</li>
          <li>Pesticides, herbicides, strong pool/landscaping chemicals</li>
          <li>Adhesives, resins, large quantities of glue</li>
          <li>Corrosive or toxic household cleaners</li>
        </ul>

        <h4 class="mt-4 mb-1 text-base md:text-lg font-semibold text-slate-900">
          Flammable / Pressurized Items
        </h4>
        <ul class="ml-5 list-disc space-y-1 text-sm md:text-base">
          <li>Propane tanks or any pressurized cylinders</li>
          <li>Gasoline, diesel, kerosene, other flammable liquids</li>
        </ul>

        <h4 class="mt-4 mb-1 text-base md:text-lg font-semibold text-slate-900">
          Batteries, Electronics & Refrigerated Appliances
        </h4>
        <ul class="ml-5 list-disc space-y-1 text-sm md:text-base">
          <li>Car batteries, lithium-ion batteries, rechargeable packs</li>
          <li>Televisions, monitors, and electronic waste (e-waste)</li>
          <li>Refrigerators, freezers, AC units containing refrigerants</li>
        </ul>

        <h4 class="mt-4 mb-1 text-base md:text-lg font-semibold text-slate-900">
          Special Construction & Industrial Materials
        </h4>
        <ul class="ml-5 list-disc space-y-1 text-sm md:text-base">
          <li>Asbestos-containing materials</li>
          <li>Railroad ties, telephone poles, creosote-treated lumber</li>
          <li>Large tree stumps or heavy concrete/brick loads</li>
        </ul>

        <h4 class="mt-4 mb-1 text-base md:text-lg font-semibold text-slate-900">
          Tires, Mattresses & Certain Furniture
        </h4>
        <ul class="ml-5 list-disc space-y-1 text-sm md:text-base">
          <li>Tires of any size</li>
          <li>Mattresses or box springs (may incur extra fees)</li>
          <li>Restricted upholstered furniture</li>
        </ul>

        <h4 class="mt-4 mb-1 text-base md:text-lg font-semibold text-slate-900">
          Medical & Biohazardous Waste
        </h4>
        <ul class="ml-5 list-disc space-y-1 text-sm md:text-base">
          <li>Medical waste, sharps, needles</li>
          <li>Biological or pathological waste</li>
        </ul>

        <h4 class="mt-4 mb-1 text-base md:text-lg font-semibold text-slate-900">
          Other Restricted Items
        </h4>
        <ul class="ml-5 list-disc space-y-1 text-sm md:text-base">
          <li>Fluorescent tubes and ballasts (mercury)</li>
          <li>Contaminated soil</li>
          <li>Large volumes of food/organic waste where restricted</li>
        </ul>

        <p class="mt-4 text-slate-600 text-sm">
          <strong>Note:</strong> Additional fees or refused pickup may occur if
          prohibited items are found in the dumpster.
        </p>
      </div>
    </div>
  </div>

  <script>
    if (typeof window !== "undefined") {
      window.addEventListener("DOMContentLoaded", () => {
        const modal = document.getElementById("prohibited-materials-modal");
        const closeBtn = document.getElementById("close-modal");
        const triggers = document.querySelectorAll(".prohibited-materials-trigger");

        // Open modal when any trigger is clicked
        triggers.forEach(trigger => {
          trigger.addEventListener("click", (e) => {
            e.preventDefault();
            modal?.classList.remove("hidden");
          });
        });

        // Close modal when close button is clicked
        closeBtn?.addEventListener("click", () => {
          modal?.classList.add("hidden");
        });

        // Close modal when clicking outside the content
        modal?.addEventListener("click", (e) => {
          if (e.target === modal) {
            modal.classList.add("hidden");
          }
        });

        // Close modal with Escape key
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && !modal?.classList.contains("hidden")) {
            modal?.classList.add("hidden");
          }
        });

        // Handle Book Now buttons
        const bookNowButtons = document.querySelectorAll(".book-now-btn");
        console.log('=== DUMPSTERS PAGE LOADED ===');
        console.log('Found Book Now buttons:', bookNowButtons.length);

        bookNowButtons.forEach(button => {
          button.addEventListener("click", (e) => {
            console.log('=== BOOK NOW CLICKED ===');
            e.preventDefault();

            const dumpsterType = button.getAttribute("data-dumpster-type");
            const dumpsterPrice = button.getAttribute("data-dumpster-price");
            console.log('Dumpster type:', dumpsterType);
            console.log('Dumpster price:', dumpsterPrice);

            // Find the corresponding date inputs
            const deliveryInput = document.getElementById(`datepicker-start-${dumpsterType}`);
            const pickupInput = document.getElementById(`datepicker-end-${dumpsterType}`);
            console.log('Delivery input element:', deliveryInput);
            console.log('Pickup input element:', pickupInput);

            const deliveryDate = (deliveryInput as HTMLInputElement)?.value;
            const pickupDate = (pickupInput as HTMLInputElement)?.value;
            console.log('Delivery date value:', deliveryDate);
            console.log('Pickup date value:', pickupDate);

            // Validate dates are selected
            if (!deliveryDate || !pickupDate) {
              console.warn('VALIDATION FAILED - Missing dates');
              alert("Please select both delivery and pickup dates before booking.");
              return;
            }

            // Store data in sessionStorage
            const orderData = {
              type: dumpsterType,
              price: dumpsterPrice,
              deliveryDate: deliveryDate,
              pickupDate: pickupDate
            };
            console.log('Order data to store:', orderData);

            sessionStorage.setItem("dumpsterOrder", JSON.stringify(orderData));
            console.log('Data stored in sessionStorage');

            // Verify storage
            const storedData = sessionStorage.getItem("dumpsterOrder");
            console.log('Verification - Retrieved from sessionStorage:', storedData);

            if (storedData) {
              console.log('Parsed stored data:', JSON.parse(storedData));
            } else {
              console.error('ERROR: Data was not stored in sessionStorage!');
            }

            // Navigate to delivery info page
            console.log('Navigating to /dumpster-delivery-info');
            window.location.href = "/dumpster-delivery-info";
          });
        });
      });
    }
  </script>

  <script src="../scripts/datepicker.ts"></script>
</div>
</Layout>